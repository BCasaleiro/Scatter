package  {		import flash.display.Loader;	import flash.display.MovieClip;	import flash.display.Sprite;		public class Map extends MovieClip {		var game : Main;		var walkableMap : Vector.<Vector.<int>>;		var imageLoader : Loader;		var mapWidth;		var mapHeight;				public function Map(game : Main, imageLoader : Loader) {			this.game = game;			this.imageLoader = imageLoader;		}		public function generateMap(level : Level) {			trace("generating map: " + level.id + " " + level.mapWidth + " " + level.mapHeight);						trace((game.stage.stageWidth - level.mapWidth) * 0.5 + " " + (game.stage.stageHeight - level.mapHeight) * 0.5);						game.x = (game.stage.stageWidth - level.mapWidth) * 0.5;			game.y = (game.stage.stageHeight - level.mapHeight) * 0.5;						walkableMap = new Vector.<Vector.<int>>(level.mapWidth);			for (var i = 0; i < level.mapWidth; i++) {				walkableMap[i] = new Vector.<int>(level.mapHeight);			}						for(i = 0; i < level.objects.length; i++) {				setWalkable(level.objects[i]);				drawInMap(level.objects[i]);			}		}		public function setWalkable(object : MapObjects) {			for(var i = 0; i < object.sizeX; i++) {				walkableMap[object.posX + i][object.posY] = object.walkable;			}						for(i = 0; i < object.sizeY; i++) {				walkableMap[object.posX][object.posY + i] = object.walkable;			}		}		public function drawInMap(object : MapObjects) {			createMapObject(object.imageSrc, object.posX, object.posY, object.sizeX, object.sizeY, object.walkable);		}				public function createMapObject(src : String, x : int, y : int, width : int, height : int, walkable : int) {			trace("drawing: " + x + " " + y + " " + width + " " + height);						var ola : edificio1 = new edificio1();			ola.width = width;			ola.height = height;			ola.x = x;			ola.y = y;			ola.buttonMode = walkable;			game.addChild(ola);						/*var buttonSprite : Sprite = new Sprite();			buttonSprite.graphics.beginFill(0x000000);			buttonSprite.graphics.drawRect(x,y,width,height);			buttonSprite.graphics.endFill();			buttonSprite.buttonMode = walkable;			buttonSprite.alpha = 0.5;			game.addChild(buttonSprite);			return buttonSprite;*/								}					}	}